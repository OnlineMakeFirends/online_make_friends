<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>发布文章</title>
</head>
<body>
<div  th:switch="${result.code}">
    <span  class="validationError" th:case="300" th:text="${result.msg}"></span>
    <div th:case="200">
        <script th:inline="javascript">
            alert("发布成功！");
            window.location.href="/post_categories_"+[[${post.categories}]];
        </script>
    </div>
</div>
    <form method="post" th:object="${post}" th:action="@{/post_submit}">
        <p>
            文章名称<br />
            <input type="text" th:field="*{title}" id="title" ><br />
            <span color="red"  class="validationError" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></span>
        </p>
        <p>
            文章内容<br />
            <input type="text"  th:field="*{context}" id="context"><br />
            <span color="red"  class="validationError" th:if="${#fields.hasErrors('context')}" th:errors="*{context}"></span>
        </p>

        <p>
            作者<br />
            <input type="text" th:field="*{author}" id="author"  th:attr="value = ${session.SPRING_SECURITY_CONTEXT.authentication.principal.username}" readonly="readonly" ><br />
            <span color="red"  class="validationError" th:if="${#fields.hasErrors('author')}" th:errors="*{author}"></span>
        </p>
        <p>
            分类<br />
            <input type="text" th:field="*{categories}" id="categories" th:attr="value = ${categories}" ><br />
            <span color="red"  class="validationError" th:if="${#fields.hasErrors('categories')}" th:errors="*{categories}" readonly="readonly"></span>
        </p>
        <input type="submit" value="发布">
    </form>

</body>
</html>